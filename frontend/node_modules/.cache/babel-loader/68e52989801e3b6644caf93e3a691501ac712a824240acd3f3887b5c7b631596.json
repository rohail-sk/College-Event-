{"ast":null,"code":"import { v4 as uuidv4 } from 'uuid';\n\n// Constants\nconst CURRENT_USER_KEY = 'current_user';\nconst TOKEN_KEY = 'auth_token';\n\n// Get current authenticated user\nexport const getCurrentUser = () => {\n  try {\n    const userData = localStorage.getItem(CURRENT_USER_KEY);\n    return userData ? JSON.parse(userData) : null;\n  } catch (error) {\n    console.error('Error getting current user:', error);\n    return null;\n  }\n};\n\n// Set authenticated user\nexport const setCurrentUser = user => {\n  if (user) {\n    localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));\n  } else {\n    localStorage.removeItem(CURRENT_USER_KEY);\n  }\n};\n\n// Get auth token\nexport const getToken = () => {\n  return localStorage.getItem(TOKEN_KEY);\n};\n\n// Set auth token\nexport const setToken = token => {\n  if (token) {\n    localStorage.setItem(TOKEN_KEY, token);\n  } else {\n    localStorage.removeItem(TOKEN_KEY);\n  }\n};\n\n// Handle login response\nexport const handleLoginSuccess = (userData, token) => {\n  // Store user data\n  setCurrentUser(userData);\n\n  // Store token\n  setToken(token);\n  return userData;\n};\n\n// Check if user is authenticated\nexport const isAuthenticated = () => {\n  return !!getCurrentUser() && !!getToken();\n};\n\n// Get user role\nexport const getUserRole = () => {\n  const user = getCurrentUser();\n  return user ? user.role : null;\n};\n\n// Clear all auth data on logout\nexport const logout = () => {\n  localStorage.removeItem(CURRENT_USER_KEY);\n  localStorage.removeItem(TOKEN_KEY);\n};\n\n// Function to handle role-based navigation\nexport const navigateToRoleDashboard = role => {\n  switch (role) {\n    case 'admin':\n      window.location.href = \"/admin-dashboard\";\n      break;\n    case 'faculty':\n      window.location.href = \"/faculty-dashboard\";\n      break;\n    case 'student':\n      window.location.href = \"/student-dashboard\";\n      break;\n    default:\n      window.location.href = \"/\";\n      break;\n  }\n};","map":{"version":3,"names":["v4","uuidv4","CURRENT_USER_KEY","TOKEN_KEY","getCurrentUser","userData","localStorage","getItem","JSON","parse","error","console","setCurrentUser","user","setItem","stringify","removeItem","getToken","setToken","token","handleLoginSuccess","isAuthenticated","getUserRole","role","logout","navigateToRoleDashboard","window","location","href"],"sources":["C:/Users/Rohail/Desktop/3rd year project/college-event/frontend/src/services/auth.js"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid';\r\n\r\n// Constants\r\nconst CURRENT_USER_KEY = 'current_user';\r\nconst TOKEN_KEY = 'auth_token';\r\n\r\n// Get current authenticated user\r\nexport const getCurrentUser = () => {\r\n  try {\r\n    const userData = localStorage.getItem(CURRENT_USER_KEY);\r\n    return userData ? JSON.parse(userData) : null;\r\n  } catch (error) {\r\n    console.error('Error getting current user:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Set authenticated user\r\nexport const setCurrentUser = (user) => {\r\n  if (user) {\r\n    localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));\r\n  } else {\r\n    localStorage.removeItem(CURRENT_USER_KEY);\r\n  }\r\n};\r\n\r\n// Get auth token\r\nexport const getToken = () => {\r\n  return localStorage.getItem(TOKEN_KEY);\r\n};\r\n\r\n// Set auth token\r\nexport const setToken = (token) => {\r\n  if (token) {\r\n    localStorage.setItem(TOKEN_KEY, token);\r\n  } else {\r\n    localStorage.removeItem(TOKEN_KEY);\r\n  }\r\n};\r\n\r\n// Handle login response\r\nexport const handleLoginSuccess = (userData, token) => {\r\n  // Store user data\r\n  setCurrentUser(userData);\r\n  \r\n  // Store token\r\n  setToken(token);\r\n  \r\n  return userData;\r\n};\r\n\r\n// Check if user is authenticated\r\nexport const isAuthenticated = () => {\r\n  return !!getCurrentUser() && !!getToken();\r\n};\r\n\r\n// Get user role\r\nexport const getUserRole = () => {\r\n  const user = getCurrentUser();\r\n  return user ? user.role : null;\r\n};\r\n\r\n// Clear all auth data on logout\r\nexport const logout = () => {\r\n  localStorage.removeItem(CURRENT_USER_KEY);\r\n  localStorage.removeItem(TOKEN_KEY);\r\n};\r\n\r\n// Function to handle role-based navigation\r\nexport const navigateToRoleDashboard = (role) => {\r\n  switch (role) {\r\n    case 'admin':\r\n      window.location.href = \"/admin-dashboard\";\r\n      break;\r\n    case 'faculty':\r\n      window.location.href = \"/faculty-dashboard\";\r\n      break;\r\n    case 'student':\r\n      window.location.href = \"/student-dashboard\";\r\n      break;\r\n    default:\r\n      window.location.href = \"/\";\r\n      break;\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,EAAE,IAAIC,MAAM,QAAQ,MAAM;;AAEnC;AACA,MAAMC,gBAAgB,GAAG,cAAc;AACvC,MAAMC,SAAS,GAAG,YAAY;;AAE9B;AACA,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAClC,IAAI;IACF,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAACL,gBAAgB,CAAC;IACvD,OAAOG,QAAQ,GAAGG,IAAI,CAACC,KAAK,CAACJ,QAAQ,CAAC,GAAG,IAAI;EAC/C,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACnD,OAAO,IAAI;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAME,cAAc,GAAIC,IAAI,IAAK;EACtC,IAAIA,IAAI,EAAE;IACRP,YAAY,CAACQ,OAAO,CAACZ,gBAAgB,EAAEM,IAAI,CAACO,SAAS,CAACF,IAAI,CAAC,CAAC;EAC9D,CAAC,MAAM;IACLP,YAAY,CAACU,UAAU,CAACd,gBAAgB,CAAC;EAC3C;AACF,CAAC;;AAED;AACA,OAAO,MAAMe,QAAQ,GAAGA,CAAA,KAAM;EAC5B,OAAOX,YAAY,CAACC,OAAO,CAACJ,SAAS,CAAC;AACxC,CAAC;;AAED;AACA,OAAO,MAAMe,QAAQ,GAAIC,KAAK,IAAK;EACjC,IAAIA,KAAK,EAAE;IACTb,YAAY,CAACQ,OAAO,CAACX,SAAS,EAAEgB,KAAK,CAAC;EACxC,CAAC,MAAM;IACLb,YAAY,CAACU,UAAU,CAACb,SAAS,CAAC;EACpC;AACF,CAAC;;AAED;AACA,OAAO,MAAMiB,kBAAkB,GAAGA,CAACf,QAAQ,EAAEc,KAAK,KAAK;EACrD;EACAP,cAAc,CAACP,QAAQ,CAAC;;EAExB;EACAa,QAAQ,CAACC,KAAK,CAAC;EAEf,OAAOd,QAAQ;AACjB,CAAC;;AAED;AACA,OAAO,MAAMgB,eAAe,GAAGA,CAAA,KAAM;EACnC,OAAO,CAAC,CAACjB,cAAc,CAAC,CAAC,IAAI,CAAC,CAACa,QAAQ,CAAC,CAAC;AAC3C,CAAC;;AAED;AACA,OAAO,MAAMK,WAAW,GAAGA,CAAA,KAAM;EAC/B,MAAMT,IAAI,GAAGT,cAAc,CAAC,CAAC;EAC7B,OAAOS,IAAI,GAAGA,IAAI,CAACU,IAAI,GAAG,IAAI;AAChC,CAAC;;AAED;AACA,OAAO,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAC1BlB,YAAY,CAACU,UAAU,CAACd,gBAAgB,CAAC;EACzCI,YAAY,CAACU,UAAU,CAACb,SAAS,CAAC;AACpC,CAAC;;AAED;AACA,OAAO,MAAMsB,uBAAuB,GAAIF,IAAI,IAAK;EAC/C,QAAQA,IAAI;IACV,KAAK,OAAO;MACVG,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,kBAAkB;MACzC;IACF,KAAK,SAAS;MACZF,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,oBAAoB;MAC3C;IACF,KAAK,SAAS;MACZF,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,oBAAoB;MAC3C;IACF;MACEF,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;MAC1B;EACJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}