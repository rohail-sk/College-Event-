{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getEvents,getRequestedEvents,approveEventRequest}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminDashboard(){const[tab,setTab]=useState('view');const[events,setEvents]=useState([]);const[loading,setLoading]=useState(true);const[requests,setRequests]=useState([]);const[reqLoading,setReqLoading]=useState(true);const[approving,setApproving]=useState(null);// Fetch all events\nuseEffect(()=>{const fetchEvents=async()=>{setLoading(true);try{const res=await getEvents();setEvents(res.data||[]);}catch{setEvents([]);}setLoading(false);};fetchEvents();},[]);// Fetch requested events\nuseEffect(()=>{const fetchRequests=async()=>{setReqLoading(true);try{const res=await getRequestedEvents();setRequests(res.data||[]);}catch{setRequests([]);}setReqLoading(false);};fetchRequests();},[]);// Approve event request (real API)\nconst handleApprove=async id=>{setApproving(id);try{await approveEventRequest(id);setRequests(prev=>prev.filter(r=>r.id!==id));// Optionally, notify faculty via backend or polling\nalert('Event approved! Faculty can now submit final event details.');}catch{alert('Failed to approve event.');}setApproving(null);};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'2rem',maxWidth:900,margin:'auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:16,marginBottom:24},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab('view'),style:{background:tab==='view'?'#333':'#eee',color:tab==='view'?'#fff':'#333',border:'none',padding:'0.5rem 1.5rem',cursor:'pointer'},children:\"View All Events\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab('requests'),style:{background:tab==='requests'?'#333':'#eee',color:tab==='requests'?'#fff':'#333',border:'none',padding:'0.5rem 1.5rem',cursor:'pointer'},children:\"Requested Events\"})]}),tab==='view'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"All Events\"}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading events...\"}):events.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"No events found.\"}):/*#__PURE__*/_jsx(\"div\",{children:events.map(event=>/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ddd',borderRadius:8,padding:16,marginBottom:16,background:'#fafafa'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',fontSize:16},children:event.title||event.name}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Date: \",event.event_date||event.date]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Description: \",event.description]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Venue: \",event.venue]})]},event.id))})]}),tab==='requests'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Requested Events\"}),reqLoading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading requests...\"}):requests.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"No event requests.\"}):/*#__PURE__*/_jsx(\"div\",{children:requests.map(req=>/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #f0ad4e',borderRadius:8,padding:16,marginBottom:16,background:'#fffbe6'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Faculty ID:\"}),\" \",req.facultyId]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Title:\"}),\" \",req.title]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Date:\"}),\" \",req.event_date]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Description:\"}),\" \",req.description]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleApprove(req.id),disabled:approving===req.id,style:{marginTop:8,padding:'6px 16px',background:'#5cb85c',color:'#fff',border:'none',borderRadius:4,fontWeight:'bold',cursor:approving===req.id?'not-allowed':'pointer',opacity:approving===req.id?0.6:1},children:approving===req.id?'Approving...':'Approve'})]},req.id))})]})]});}export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","getEvents","getRequestedEvents","approveEventRequest","jsx","_jsx","jsxs","_jsxs","AdminDashboard","tab","setTab","events","setEvents","loading","setLoading","requests","setRequests","reqLoading","setReqLoading","approving","setApproving","fetchEvents","res","data","fetchRequests","handleApprove","id","prev","filter","r","alert","style","padding","maxWidth","margin","children","display","gap","marginBottom","onClick","background","color","border","cursor","length","map","event","borderRadius","fontWeight","fontSize","title","name","event_date","date","description","venue","req","facultyId","disabled","marginTop","opacity"],"sources":["C:/Users/Rohail/Desktop/3rd year project/college-event/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getEvents, getRequestedEvents, approveEventRequest } from '../services/api';\r\n\r\n\r\n\r\nfunction AdminDashboard() {\r\n  const [tab, setTab] = useState('view');\r\n  const [events, setEvents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [requests, setRequests] = useState([]);\r\n  const [reqLoading, setReqLoading] = useState(true);\r\n  const [approving, setApproving] = useState(null);\r\n\r\n  // Fetch all events\r\n  useEffect(() => {\r\n    const fetchEvents = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await getEvents();\r\n        setEvents(res.data || []);\r\n      } catch {\r\n        setEvents([]);\r\n      }\r\n      setLoading(false);\r\n    };\r\n    fetchEvents();\r\n  }, []);\r\n\r\n  // Fetch requested events\r\n  useEffect(() => {\r\n    const fetchRequests = async () => {\r\n      setReqLoading(true);\r\n      try {\r\n        const res = await getRequestedEvents();\r\n        setRequests(res.data || []);\r\n      } catch {\r\n        setRequests([]);\r\n      }\r\n      setReqLoading(false);\r\n    };\r\n    fetchRequests();\r\n  }, []);\r\n\r\n  // Approve event request (real API)\r\n  const handleApprove = async (id) => {\r\n    setApproving(id);\r\n    try {\r\n      await approveEventRequest(id);\r\n      setRequests(prev => prev.filter(r => r.id !== id));\r\n      // Optionally, notify faculty via backend or polling\r\n      alert('Event approved! Faculty can now submit final event details.');\r\n    } catch {\r\n      alert('Failed to approve event.');\r\n    }\r\n    setApproving(null);\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '2rem', maxWidth: 900, margin: 'auto' }}>\r\n      <h2>Admin Dashboard</h2>\r\n      <div style={{ display: 'flex', gap: 16, marginBottom: 24 }}>\r\n        <button onClick={() => setTab('view')} style={{ background: tab === 'view' ? '#333' : '#eee', color: tab === 'view' ? '#fff' : '#333', border: 'none', padding: '0.5rem 1.5rem', cursor: 'pointer' }}>View All Events</button>\r\n        <button onClick={() => setTab('requests')} style={{ background: tab === 'requests' ? '#333' : '#eee', color: tab === 'requests' ? '#fff' : '#333', border: 'none', padding: '0.5rem 1.5rem', cursor: 'pointer' }}>Requested Events</button>\r\n      </div>\r\n\r\n      {tab === 'view' && (\r\n        <div>\r\n          <h3>All Events</h3>\r\n          {loading ? <div>Loading events...</div> : (\r\n            events.length === 0 ? <div>No events found.</div> : (\r\n              <div>\r\n                {events.map(event => (\r\n                  <div key={event.id} style={{ border: '1px solid #ddd', borderRadius: 8, padding: 16, marginBottom: 16, background: '#fafafa' }}>\r\n                    <div style={{ fontWeight: 'bold', fontSize: 16 }}>{event.title || event.name}</div>\r\n                    <div>Date: {event.event_date || event.date}</div>\r\n                    <div>Description: {event.description}</div>\r\n                    <div>Venue: {event.venue}</div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {tab === 'requests' && (\r\n        <div>\r\n          <h3>Requested Events</h3>\r\n          {reqLoading ? <div>Loading requests...</div> : (\r\n            requests.length === 0 ? <div>No event requests.</div> : (\r\n              <div>\r\n                {requests.map(req => (\r\n                  <div key={req.id} style={{ border: '1px solid #f0ad4e', borderRadius: 8, padding: 16, marginBottom: 16, background: '#fffbe6' }}>\r\n                    <div><b>Faculty ID:</b> {req.facultyId}</div>\r\n                    <div><b>Title:</b> {req.title}</div>\r\n                    <div><b>Date:</b> {req.event_date}</div>\r\n                    <div><b>Description:</b> {req.description}</div>\r\n                    <button onClick={() => handleApprove(req.id)} disabled={approving === req.id} style={{ marginTop: 8, padding: '6px 16px', background: '#5cb85c', color: '#fff', border: 'none', borderRadius: 4, fontWeight: 'bold', cursor: approving === req.id ? 'not-allowed' : 'pointer', opacity: approving === req.id ? 0.6 : 1 }}>\r\n                      {approving === req.id ? 'Approving...' : 'Approve'}\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}